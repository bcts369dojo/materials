# 環境変数をGoで使う

## はじめに

**環境変数** というと、難しそうなイメージを持つかもしれませんが、

システム（OS）にログイン後、システムやユーザ、アプリケーションが何かをするときに必要な情報を、OSが記憶している変数です。
例えば、利用しているシェルが何かはつぎのコマンド確認できます。

```sh
echo $SHELL
```

結果

```
/usr/bin/zsh
```

つまり環境変数`SHELL`には`/usr/bin/zsh`が記録されているということです。環境変数に関する詳細を知りたい場合は、参考情報へのリンクを参照したり、その他ググってください。

今後のエクササイズで作っていくアプリケーションでは、様々な機密情報（パスワードなど）を扱います。
この機密情報をコードに埋め込んでしまうと、悪意を持った開発者に解析され、奪われてしまいます。
GitHubのプライベートリポジトリでコード管理したとしてもNGです。

そこで、一般的には3つの方法があると思います。

1. 開発中のアプリから外部ファイルとして読み込む（その外部ファイルは .gitignoreに登録して、githubに保存されないようにすることが必須）。
2. ガチガチにセキュリティ対策済みのDBに登録するか、利用者のPCのどこかに保存して読み込む。
3. 環境変数に登録して、読み込む

ちなみに、複数ユーザが利用するようなアプリの場合は **2** しかありません。

今回は **環境変数** にパスワードなどの機密情報を登録し、アプリ側で読み込むことを行います。
これによって、定められた環境変数に正しい機密情報が登録されているPCでしか、アプリケーションが正常に動作できないことを保証できます。
もちろん、ご自身のPCがハッキングされてしまった場合はこの限りではありません。

Go言語で環境変数を取得するのは簡単です。

`os`パッケージをインポートし、次のようなコードで取得できます。

```go
pass = os.Getenv("MYPASSWORD")
```

では、環境変数に情報を登録するにはどうしたら良いでしょうか？

Zshシェルを使用している場合は、エディタを使用して `~/.zshrc` に次のように記述します。
記述場所は一番最後の行で良いでしょう。

```sh
export MYPASSWORD="abcdefg000"
```

上記を `~/.zshrc` に追加し、ターミナルで `source ~/.zshrc` または、`exec "$SHELL"` コマンドを実行すると、環境変数 `MYPASSWORD` が利用できるようになります。

ちなみに、`source ~/.zshrc`、`exec "$SHELL"` コマンドは、シェル環境をリロードします。


## 理解度チェック

続く。。

## 参考情報へのリンク

- [環境変数 - Wikipedia](https://ja.wikipedia.org/wiki/%E7%92%B0%E5%A2%83%E5%A4%89%E6%95%B0)
